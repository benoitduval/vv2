<div class="row" data-plugin="matchHeight" data-by-row="true">
  <div class="col-12">
    <!-- Panel Wizard Pager -->
    <div class="panel" id="statsWizard" style="min-height: calc(100% - 44px);">
      <div class="panel-heading">
        <div class="panel-actions panel-actions-keep">
        </div>
        <h3 class="panel-title">Statistics</h3>
      </div>
      <div class="panel-body">
        <div class="wizard-content">
              <div class="wizard-pane active" role="tabpanel">
                <div class="row" id="service-quality">
                  <h4 class="col-12">Service</h4>
                  <div class="col-12 text-center mb-10">
                    <img class="avatar" src="/img/avatars/2cbab098cd318b3ef269c68d06464066.png" onerror="if (this.src != '/img/default-avatar.png') this.src = '/img/default-avatar.png';">
                  </div>
                  <div class="col-12 mb-10">
                    <div class="btn-group btn-group-justified">
                      <div class="btn-group" role="group">
                        <button type="button" class="btn btn-danger btn-outline" data-value="<?= \Application\Model\Stats::POINT_US ?>">
                          <span class="text-uppercase">Easy</span>
                        </button>
                      </div>
                      <div class="btn-group" role="group">
                        <button type="button" class="btn btn-warning btn-outline" data-value="<?= \Application\Model\Stats::POINT_THEM ?>">
                          <span class="text-uppercase">Medium</span>
                        </button>
                      </div>
                      <div class="btn-group" role="group">
                        <button type="button" class="btn btn-success btn-outline" data-value="<?= \Application\Model\Stats::POINT_THEM ?>">
                          <span class="text-uppercase">Hard</span>
                        </button>
                      </div>
                      <div class="btn-group" role="group">
                        <button type="button" class="btn btn-success" data-value="<?= \Application\Model\Stats::POINT_THEM ?>">
                          <span class="text-uppercase">Ace</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row" id="service-quality">
                  <h4 class="col-12">Reception</h4>
                  <div class="col-12 text-center mb-10">
                    <?php for ($i = 0; $i < 6; $i++) :?>
                      <img class="avatar" src="/img/avatars/2cbab098cd318b3ef269c68d06464066.png" onerror="if (this.src != '/img/default-avatar.png') this.src = '/img/default-avatar.png';">
                    <?php endfor; ?>
                  </div>
                  <div class="col-12 mb-10">
                    <div class="btn-group btn-group-justified">
                      <div class="btn-group" role="group">
                        <button type="button" class="btn btn-success btn-outline" data-value="<?= \Application\Model\Stats::POINT_THEM ?>">
                          <span class="text-uppercase">Good</span>
                        </button>
                      </div>
                      <div class="btn-group" role="group">
                        <button type="button" class="btn btn-warning btn-outline" data-value="<?= \Application\Model\Stats::POINT_THEM ?>">
                          <span class="text-uppercase">Medium</span>
                        </button>
                      </div>
                      <div class="btn-group" role="group">
                        <button type="button" class="btn btn-danger btn-outline" data-value="<?= \Application\Model\Stats::POINT_US ?>">
                          <span class="text-uppercase">Bad</span>
                        </button>
                      </div>
                      <div class="btn-group" role="group">
                        <button type="button" class="btn btn-danger" data-value="<?= \Application\Model\Stats::POINT_THEM ?>">
                          <span class="text-uppercase">Ace</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="btn-group btn-group-justified">
                  <div class="btn-group" role="group">
                    <button type="button" class="btn btn-success btn-next" id="point-us" data-value="<?= \Application\Model\Stats::POINT_US ?>">
                      <span class="counter font-size-30"><?= $scoreUs ?></span>
                      <br>
                      <span class="text-uppercase">Us</span>
                    </button>
                  </div>
                  <div class="btn-group" role="group">
                    <button type="button" class="btn btn-danger btn-next" id="point-them" data-value="<?= \Application\Model\Stats::POINT_THEM ?>">
                      <span class="counter font-size-30"><?= $scoreThem ?></span>
                      <br>
                      <span class="text-uppercase">Them</span>
                    </button>
                  </div>
                </div>
              </div>
              <div class="wizard-pane" role="tabpanel">
                <div class="row">
                    <div class='col-6 text-center'>
                        <h5 class="text-center">Point</h5>
                        <button id="attack-us" value="<?= \Application\Model\Stats::POINT_ATTACK ?>" name="reason" class="btn btn-success btn-xlg btn-next col-12 hidden">Attack</button>
                        <button id="attack-them" value="<?= \Application\Model\Stats::POINT_ATTACK ?>" name="reason" class="btn btn-success col-12 btn-xlg hidden">Attack</button>
                        <button id="service-point-them" value="<?= \Application\Model\Stats::POINT_SERVE ?>" name="reason" class="btn btn-success col-12 btn-xlg mt-10 hidden">Serve</button>
                        <button id="service-point-us" value="<?= \Application\Model\Stats::POINT_SERVE ?>" name="reason" class="btn btn-success col-12 btn-xlg btn-next mt-10 hidden">Serve</button>
                        <button id="block-point-us" value="<?= \Application\Model\Stats::POINT_SERVE ?>" name="reason" class="btn btn-success col-12 btn-xlg mt-10 hidden btn-next">Block</button>
                        <button id="block-point-them" value="<?= \Application\Model\Stats::POINT_BLOCK ?>" name="reason" class="btn btn-success col-12 btn-xlg mt-10 hidden btn-next">Block</button>
                    </div>
                    <div class='col-6 text-center'>
                        <h5>Faute</h5>
                        <button id="attack-fault-them" value="<?= \Application\Model\Stats::FAULT_ATTACK ?>" name="reason" class="btn btn-danger col-12 btn-xlg hidden" data-toggle="modal" data-target="#attaque">Attack</button>
                        <button id="attack-fault-us" value="<?= \Application\Model\Stats::FAULT_ATTACK ?>" name="reason" class="btn btn-danger btn-xlg btn-next col-12 hidden">Attack</button>
                        <button id="service-fault-them" value="<?= \Application\Model\Stats::FAULT_SERVE ?>" name="reason" class="mt-10 btn btn-danger col-12 btn-xlg hidden">Serve</button>
                        <button id="service-fault-us" value="<?= \Application\Model\Stats::FAULT_SERVE ?>" name="reason" class="mt-10 btn btn-danger col-12 btn-xlg btn-next hidden">Serve</button>
                        <button id="defensive-fault" value="<?= \Application\Model\Stats::FAULT_DEFENCE ?>" name="reason" class="mt-10 btn btn-danger col-12 btn-xlg hidden">Defensive</button>
                    </div>
                </div>
              </div>
              <div class="wizard-pane" role="tabpanel">
                <div class="row">
                    <div class="col-12 text-center">
                        <?php foreach ($users as $user): ?>
                            <label class="btn-avatar" data-user-id="<?= $user->id ?>">
                              <img class="avatar avatar-lg" src="<?= $user->getAvatarPath() ?>" onerror="if (this.src != '/img/default-avatar.png') this.src = '/img/default-avatar.png';">
                            </label>
                        <?php endforeach ?>
                    </div>

                    <table class="table" data-delete-link="<?= $deleteLink ?>">
                      <tr>
                        <td class="court-outside inactive" width="2%" rowspan="5"></td>
                        <td class="court-outside inactive" height="40px" colspan="2"></td>
                        <!-- NET -->
                        <td rowspan="5" width="2%" class="court-net inactive out" data-target="7"></td>
                        <td class="court-outside inactive out" height="40px" colspan="2" style="border: none; color:#FFF;" data-target="8"></td>
                        <td class="court-outside inactive out" width="40px" rowspan="5" data-target="9"></td>
                      </tr>
                      <tr class="col-12">
                        <!-- attack P5 -->
                        <td height="70px" class="court-inside inactive court-border-top court-border-left court-border-right attack text-center" data-attack="5">P5</td>
                        <!-- attack P4 -->
                        <td height="70px" class="court-inside inactive court-border-top front attack text-center" data-attack="4">P4</td>
                        <!-- target P2 -->
                        <td height="70px" class="court-inside inactive court-border-top front target text-center" data-target="2">P2</td>
                        <!-- target P1 -->
                        <td height="70px" class="court-inside inactive court-border-top court-border-left court-border-right target text-center" data-target="1">P1</td>
                      </tr>
                      <tr class="col-12">
                        <!-- attack P6 -->
                        <td height="70px" class="court-inside inactive court-border-left court-border-right attack text-center" data-attack="6">P6</td>
                        <!-- attack P3 -->
                        <td height="70px" class="court-inside inactive front attack text-center" data-attack="3">P3</td>
                        <!-- target P3 -->
                        <td height="70px" class="court-inside inactive front target text-center" data-target="3">P3</td>
                        <!-- target P6 -->
                        <td height="70px" class="court-inside inactive court-border-left court-border-right target text-center" data-target="6">P6</td>
                      </tr>
                      <tr class="col-12">
                        <!-- attack P1 -->
                        <td height="70px" class="court-inside inactive court-border-bottom court-border-left court-border-right attack text-center" data-attack="1">P1</td>
                        <!-- attack P2 -->
                        <td height="70px" class="court-inside inactive court-border-bottom front attack text-center" data-attack="2">P2</td>
                        <!-- target P4 -->
                        <td height="70px" class="court-inside inactive court-border-bottom front target text-center" data-target="4">P4</td>
                        <!-- target P5 -->
                        <td height="70px" class="court-inside inactive court-border-bottom court-border-left court-border-right target text-center" data-target="5">P5</td>
                      </tr>
                      <tr>
                        <td class="court-outside inactive" height="40px" colspan="2"></td>
                        <td class="court-outside inactive out" height="40px" colspan="2" data-target="10"></td>
                      </tr>
                    </table>
                </div>
              </div>
        </div>
      </div>
    </div>
    <!-- End Panel Wizard Pager -->

    <form id="game-stats" method="POST" class="hidden">
        <input type="hidden" id="block-us" name="block-us" value="0"/>
        <input type="hidden" id="block-them" name="block-them" value="0"/>
        <input type="hidden" id="defence-us" name="defence-us" value="0"/>
        <input type="hidden" id="defence-them" name="defence-them" value="0"/>
        <input type="hidden" id="point-for" name="point-for" value=""/>
        <input type="hidden" id="reason" name="reason" value=""/>
        <input type="hidden" id="userId" name="userId" value=""/>
        <input type="hidden" id="from-zone" name="from-zone" value=""/>
        <input type="hidden" id="to-zone" name="to-zone" value=""/>
        <input type="hidden" id="score-us" name="score-us" value="<?= $scoreUs ?>"/>
        <input type="hidden" id="score-them" name="score-them" value="<?= $scoreThem ?>"/>
    </form>
  </div>
</div>

<?php
  $newSet   = (!$scoreUs && !$scorethem) ? 'true': 'false';
  $keyboard = ($newSet == 'true') ? 'false' : 'true';
  $backdrop = ($keyboard == 'true') ? 'dark' : 'static';
?>

<div class="modal fade" id="positions" aria-hidden="true" data-keyboard="<?= $keyboard ?>" data-backdrop="<?= $backdrop ?>" aria-labelledby="positions"
  role="dialog" tabindex="-1" data-show="<?= $newSet ?>">
  <div class="modal-dialog modal-simple">
    <form id="positions-form" method="POST" action="/">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Make Your Selection</h4>
          <?php if ($newSet == 'false'): ?>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          <?php endif ?>
        </div>
        <div class="modal-body row">
          <?php if ($newSet == 'true'): ?>
            <div class="col-12 mt-10">
              <h5>Start set with</h5>
              <select class="form-control" id="first-point" required>
                <option selected="selected" value="" disabled>First Point</option>
                  <option value="1">Reception</option>
                  <option value="2">Service</option>
              </select>
            </div>
          <?php endif ?>

          <div class="col-12 mt-10">
            <h5>Positions</h5>
            <table class="table">
              <tr>
                <td class="court-outside" width="40px" rowspan="5"></td>
                <td class="court-outside" height="40px" colspan="2">
                  <div class="col-8 mt-10">
                    <select class="form-control user-select" required id="libero">
                      <option selected="selected" value="" disabled>Libero</option>
                      <?php foreach ($users as $user): ?>
                        <option class="user-<?= $user->id ?>" value="<?= $user->id ?>"><?= $user->getFullname() ?></option>
                      <?php endforeach; ?>
                    </select>
                  </div>
                </td>
                <!-- NET -->
                <td rowspan="5" width="2%" class="court-net inactive out" data-target="7"></td>
              </tr>
              <tr class="col-12">
                <!-- attack P5 -->
                <td height="70px" class="court-inside court-border-top court-border-left court-border-right attack text-center" data-attack="5">
                  <div class="col-12">
                    <select class="form-control user-select" required id="select-P5">
                      <option selected="selected" value="" disabled>P5</option>
                      <?php foreach ($users as $user): ?>
                        <option class="user-<?= $user->id ?>" value="<?= $user->id ?>"><?= $user->getFullname() ?></option>
                      <?php endforeach; ?>
                    </select>
                  </div>
                </td>
                <!-- attack P4 -->
                <td height="70px" class="court-inside court-border-top front attack text-center" data-attack="4">
                  <div class="col-12">
                    <select class="form-control user-select" required id="select-P4">
                      <option selected="selected" value="" disabled>P4</option>
                      <?php foreach ($users as $user): ?>
                        <option class="user-<?= $user->id ?>" value="<?= $user->id ?>"><?= $user->getFullname() ?></option>
                      <?php endforeach; ?>
                    </select>
                  </div>
                </td>
              </tr>
              <tr class="col-12">
                <!-- attack P6 -->
                <td height="70px" class="court-inside court-border-left court-border-right attack text-center" data-attack="6">
                  <div class="col-12">
                    <select class="form-control user-select" required id="select-P6">
                      <option selected="selected" value="" disabled>P6</option>
                      <?php foreach ($users as $user): ?>
                        <option class="user-<?= $user->id ?>" value="<?= $user->id ?>"><?= $user->getFullname() ?></option>
                      <?php endforeach; ?>
                    </select>
                  </div>
                </td>
                <!-- attack P3 -->
                <td height="70px" class="court-inside front attack text-center" data-attack="3">
                  <div class="col-12">
                    <select class="form-control user-select" required id="select-P3">
                      <option selected="selected" value="" disabled>P3</option>
                      <?php foreach ($users as $user): ?>
                        <option class="user-<?= $user->id ?>" value="<?= $user->id ?>"><?= $user->getFullname() ?></option>
                      <?php endforeach; ?>
                    </select>
                  </div>
                </td>
              </tr>
              <tr class="col-12">
                <!-- attack P1 -->
                <td height="70px" class="court-inside court-border-bottom court-border-left court-border-right attack text-center" data-attack="1">
                  <div class="col-12">
                    <select class="form-control user-select" required id="select-P1">
                      <option selected="selected" value="" disabled>P1</option>
                      <?php foreach ($users as $user): ?>
                        <option class="user-<?= $user->id ?>" value="<?= $user->id ?>"><?= $user->getFullname() ?></option>
                      <?php endforeach; ?>
                    </select>
                  </div>
                </td>
                <!-- attack P2 -->
                <td height="70px" class="court-inside court-border-bottom front attack text-center" data-attack="2">
                  <div class="col-12">
                    <select class="form-control user-select" required id="select-P2">
                      <option selected="selected" value="" disabled>P2</option>
                      <?php foreach ($users as $user): ?>
                        <option class="user-<?= $user->id ?>" value="<?= $user->id ?>"><?= $user->getFullname() ?></option>
                      <?php endforeach; ?>
                    </select>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="court-outside" height="40px" colspan="2"></td>
              </tr>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success btn-outline" id="submit-point" href="#" role="button">Submit</button>
        </div>
      </div>
    </form>
  </div>
</div>